Version 4
SHEET 1 1928 1784
WIRE 336 -1024 320 -1024
WIRE 432 -1024 416 -1024
WIRE 0 -960 0 -1088
WIRE 144 -960 0 -960
WIRE 272 -960 224 -960
WIRE 320 -960 320 -1024
WIRE 320 -960 272 -960
WIRE 1168 -960 1040 -960
WIRE 1280 -960 1248 -960
WIRE 0 -944 0 -960
WIRE 272 -912 272 -960
WIRE 320 -912 272 -912
WIRE 432 -896 432 -1024
WIRE 432 -896 384 -896
WIRE 912 -896 432 -896
WIRE 1040 -896 1040 -960
WIRE 1040 -896 992 -896
WIRE 1072 -896 1040 -896
WIRE 320 -880 272 -880
WIRE 1280 -880 1280 -960
WIRE 1280 -880 1136 -880
WIRE 1344 -880 1280 -880
WIRE 1072 -864 1040 -864
WIRE 0 -848 0 -864
WIRE 48 -848 0 -848
WIRE 144 -848 48 -848
WIRE 272 -848 272 -880
WIRE 272 -848 224 -848
WIRE 352 -848 352 -864
WIRE 272 -832 272 -848
WIRE 944 -832 912 -832
WIRE 1040 -832 1040 -864
WIRE 1040 -832 1024 -832
WIRE 1072 -832 1040 -832
WIRE 272 -720 272 -752
WIRE 912 -656 912 -832
WIRE 912 -656 832 -656
WIRE 1072 -656 1072 -832
WIRE 912 -608 912 -656
WIRE 832 -496 832 -656
WIRE 896 -496 896 -544
WIRE 896 -496 832 -496
WIRE 928 -480 928 -544
WIRE 960 -480 928 -480
WIRE 1072 -480 1072 -576
WIRE 1072 -480 1040 -480
WIRE 928 -432 928 -480
WIRE 1072 -336 1072 -480
WIRE 928 -320 928 -352
WIRE 1072 -160 944 -160
WIRE 1104 -160 1072 -160
WIRE 944 -112 944 -160
WIRE 1072 -112 1072 -160
WIRE 880 -64 832 -64
WIRE 352 -16 320 -16
WIRE 448 -16 432 -16
WIRE 480 -16 448 -16
WIRE 880 0 832 0
WIRE 448 32 448 -16
WIRE 448 32 400 32
WIRE 0 64 0 -848
WIRE 192 64 0 64
WIRE 320 64 320 -16
WIRE 320 64 272 64
WIRE 400 64 400 32
WIRE 880 64 832 64
WIRE 1264 64 1136 64
WIRE 320 80 320 64
WIRE 368 80 320 80
WIRE 480 96 432 96
WIRE 560 96 480 96
WIRE 592 96 560 96
WIRE 368 112 320 112
WIRE 192 160 144 160
WIRE 320 160 320 112
WIRE 320 160 272 160
WIRE 368 160 320 160
WIRE 368 208 368 160
WIRE 480 208 480 96
WIRE 480 208 448 208
WIRE 144 288 144 160
WIRE 144 288 0 288
WIRE 352 336 320 336
WIRE 448 336 432 336
WIRE 480 336 448 336
WIRE 1264 352 1136 352
WIRE 448 384 448 336
WIRE 448 384 400 384
WIRE 592 384 592 96
WIRE 880 384 592 384
WIRE 1264 400 1264 352
WIRE 144 416 144 288
WIRE 192 416 144 416
WIRE 320 416 320 336
WIRE 320 416 272 416
WIRE 400 416 400 384
WIRE 320 432 320 416
WIRE 368 432 320 432
WIRE 480 448 432 448
WIRE 560 448 480 448
WIRE 880 448 560 448
WIRE 368 464 320 464
WIRE 192 512 144 512
WIRE 320 512 320 464
WIRE 320 512 272 512
WIRE 368 512 320 512
WIRE 880 512 592 512
WIRE 1264 512 1264 480
WIRE 1424 512 1264 512
WIRE 368 560 368 512
WIRE 480 560 480 448
WIRE 480 560 448 560
WIRE 1264 560 1264 512
WIRE 880 576 608 576
WIRE 144 672 144 512
WIRE 144 672 0 672
WIRE 352 688 320 688
WIRE 448 688 432 688
WIRE 480 688 448 688
WIRE 1264 704 1264 640
WIRE 1008 720 1008 640
WIRE 448 736 448 688
WIRE 448 736 400 736
WIRE 144 768 144 672
WIRE 192 768 144 768
WIRE 320 768 320 688
WIRE 320 768 272 768
WIRE 400 768 400 736
WIRE 320 784 320 768
WIRE 368 784 320 784
WIRE 480 800 432 800
WIRE 560 800 480 800
WIRE 592 800 592 512
WIRE 592 800 560 800
WIRE 368 816 320 816
WIRE 192 864 144 864
WIRE 320 864 320 816
WIRE 320 864 272 864
WIRE 368 864 320 864
WIRE 368 912 368 864
WIRE 480 912 480 800
WIRE 480 912 448 912
WIRE 144 1008 144 864
WIRE 144 1008 0 1008
WIRE 560 1008 144 1008
WIRE 608 1008 608 576
WIRE 608 1008 560 1008
FLAG 352 -928 Vs+
IOPIN 352 -928 In
FLAG 400 832 Vs+
IOPIN 400 832 In
FLAG 400 480 Vs+
IOPIN 400 480 In
FLAG 400 128 Vs+
IOPIN 400 128 In
FLAG 0 1008 C1_P
IOPIN 0 1008 In
FLAG 0 672 C2_P
IOPIN 0 672 In
FLAG 0 288 C3_P
IOPIN 0 288 In
FLAG 0 64 C4_P
IOPIN 0 64 In
FLAG 560 800 Mux2
FLAG 560 448 Mux3
FLAG 560 96 Mux4
FLAG 560 1008 Mux1
FLAG 48 -848 Vshunt
FLAG 352 -848 Vs-
IOPIN 352 -848 In
FLAG 480 -16 GND
IOPIN 480 -16 BiDir
FLAG 480 336 GND
IOPIN 480 336 BiDir
FLAG 480 688 GND
IOPIN 480 688 BiDir
FLAG 1104 -160 GND
IOPIN 1104 -160 BiDir
FLAG 1424 512 MUX_Out
IOPIN 1424 512 Out
FLAG 0 -1088 BATT_P
IOPIN 0 -1088 Out
FLAG 1008 720 Vs+
IOPIN 1008 720 In
FLAG 1344 -880 ShuntOut
IOPIN 1344 -880 Out
FLAG 1072 -336 GND
IOPIN 1072 -336 BiDir
FLAG 928 -320 Vs+
IOPIN 928 -320 In
FLAG 1104 -848 Vs-
IOPIN 1104 -848 In
FLAG 944 -576 Vs-
IOPIN 944 -576 In
FLAG 1104 -912 Vs+
IOPIN 1104 -912 In
FLAG 880 -576 Vs+
IOPIN 880 -576 In
FLAG 1264 704 GND
IOPIN 1264 704 BiDir
FLAG 832 64 SEL0
IOPIN 832 64 In
FLAG 832 0 SEL1
IOPIN 832 0 In
FLAG 832 -64 SEL2
IOPIN 832 -64 In
FLAG 1264 64 EN
IOPIN 1264 64 In
FLAG 272 -720 GND
IOPIN 272 -720 BiDir
SYMBOL res 240 -976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 20K
SYMBOL res 240 -864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 20K
SYMBOL res 432 -1040 R90
WINDOW 0 -2 82 VBottom 2
WINDOW 3 -30 31 VTop 2
SYMATTR InstName R3
SYMATTR Value 20k
SYMBOL res 256 -848 R0
SYMATTR InstName R4
SYMATTR Value 20k
SYMBOL res 288 880 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 20K
SYMBOL res 288 784 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 20K
SYMBOL res 464 928 M270
WINDOW 0 -26 80 VTop 2
WINDOW 3 2 26 VBottom 2
SYMATTR InstName R7
SYMATTR Value 20k
SYMBOL res 336 672 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL res 288 528 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 20K
SYMBOL res 288 432 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 20K
SYMBOL res 464 576 M270
WINDOW 0 -27 86 VTop 2
WINDOW 3 0 27 VBottom 2
SYMATTR InstName R11
SYMATTR Value 20k
SYMBOL res 336 320 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 20k
SYMBOL res 288 176 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value 20K
SYMBOL res 288 80 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 20K
SYMBOL res 464 224 M270
WINDOW 0 -25 79 VTop 2
WINDOW 3 3 26 VBottom 2
SYMATTR InstName R15
SYMATTR Value 20k
SYMBOL res 336 -32 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 20k
SYMBOL res -16 -960 R0
SYMATTR InstName Shunt
SYMATTR Value 0.1
SYMATTR SpiceLine pwr=10W
SYMBOL Switches\\ADG5208 1008 320 M180
SYMATTR InstName U5
SYMBOL Opamps\\opamp2 848 -576 R270
SYMATTR InstName U6
SYMATTR Value LM324/NS
SYMBOL Opamps\\opamp2 1104 -944 R0
SYMATTR InstName U7
SYMATTR Value LM324/NS
SYMBOL res 1008 -912 R90
WINDOW 0 1 54 VBottom 2
WINDOW 3 29 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 48.48K
SYMBOL res 1040 -848 R90
WINDOW 0 60 95 VBottom 2
WINDOW 3 33 14 VTop 2
SYMATTR InstName R18
SYMATTR Value 48.48K
SYMBOL res 912 -448 R0
SYMATTR InstName R19
SYMATTR Value 20k
SYMBOL res 1056 -496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL res 1088 -560 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R21
SYMATTR Value 20k
SYMBOL res 1264 -976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 20k
SYMBOL Opamps\\opamp2 352 -960 R0
SYMATTR InstName U9
SYMATTR Value LM324/NS
SYMBOL Opamps\\opamp2 400 512 M180
SYMATTR InstName U10
SYMATTR Value LM324/NS
SYMBOL Opamps\\opamp2 400 160 M180
SYMATTR InstName U11
SYMATTR Value LM324/NS
SYMBOL Opamps\\opamp2 400 864 M180
SYMATTR InstName U1
SYMATTR Value LM324/NS
SYMBOL res 1280 544 M0
SYMATTR InstName R23
SYMATTR Value 94.25K
SYMBOL res 1280 384 M0
SYMATTR InstName R24
SYMATTR Value 20K
TEXT 144 1088 Right 2 !.include nat_semi.lib
TEXT 448 -952 Left 2 ;Discharging: -4V - 0V\nCharging: 0 - 4V
TEXT 928 -752 Left 2 ;4V
TEXT 1072 -1016 Left 2 ;0-8V => 0-3.3V
TEXT 864 -336 Left 2 ;12V
TEXT 16 -816 Left 2 ;+/-40A
TEXT 1360 -920 Left 2 ;0-3.3V
TEXT 1200 328 Left 2 ;0-4V
TEXT 1312 496 Left 2 ;0-3.3V
TEXT 624 368 Left 2 ;0-4V
TEXT 624 432 Left 2 ;0-4V
TEXT 624 496 Left 2 ;0-4V
TEXT 624 560 Left 2 ;0-4V
TEXT 1272 16 Left 2 ;3.3V
TEXT 760 -104 Left 2 ;3.3V
TEXT -264 -928 Left 2 ;Discharging: -20A - 0A\nCharging: 0A - 20A
TEXT 1352 -840 Left 2 ;0-3.3V\n0-1.65V => Charing 20V - 0V\n1.65V => 3.3V Discharging 0V-20V
TEXT 544 -832 Left 2 ;0-8V\n0-4V => Charing 20 - 0A\n4-8V => 3.3V Discharging 0-20A
